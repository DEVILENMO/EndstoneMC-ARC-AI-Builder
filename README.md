# ARC AI Builder Plugin

一个基于OpenAI的Minecraft AI建筑师插件，可以根据玩家需求自动生成并执行建筑指令。

## 功能特性

- 🤖 **AI驱动**: 使用OpenAI GPT模型分析玩家需求并生成建筑指令
- 💰 **经济系统集成**: 支持arc_core和umoney经济系统，自动计算建筑成本
- 🏗️ **异步建造**: 使用多线程执行建筑指令，避免服务器卡顿
- 📋 **建造历史**: 记录玩家的所有建造历史
- 🎯 **精确控制**: 支持1x1到64x64的建筑范围
- 💡 **智能估价**: AI会根据材料价格自动计算建筑成本

## 安装要求

- EndStone服务器
- arc_core或umoney经济系统插件
- OpenAI API密钥

## 安装步骤

1. 将插件文件放入服务器的`plugins`目录
2. 重启服务器
3. 使用管理员权限配置OpenAI API：
   ```
   /aibuilderconfig <your_openai_api_key> [api_url]
   ```

## 使用方法

### 基本命令

- `/aibuilder` - 打开AI建筑师主界面
- `/aibuilderconfig <api_key> [url]` - 配置OpenAI API（管理员专用）

### 建造流程

1. 站在你想要建造建筑的位置
2. 输入 `/aibuilder` 打开主界面
3. 点击"开始建造"
4. 输入建筑范围（1-64）
5. 描述你的建筑需求
6. 等待AI生成建筑方案
7. 确认成本后开始建造

### 示例需求描述

- "建造一个两层的小木屋，有窗户和门"
- "建造一个现代化的玻璃别墅，有游泳池"
- "建造一个中世纪城堡，有城墙和塔楼"
- "建造一个地下基地，有多个房间"

## 经济系统

插件会根据以下价格计算建筑成本：

- 地价：每格5000元
- 钻石：每颗15000元
- 原木：每块20元
- 石头：每块10元
- 土豆：每颗30元

## 技术特性

- **多线程支持**: 建筑指令在子线程中执行，不会阻塞主服务器线程
- **进度跟踪**: 实时显示建造进度
- **错误处理**: 完善的错误处理和回滚机制
- **数据持久化**: 使用SQLite数据库存储建造记录和配置

## 配置说明

插件会在 `plugins/ARCAIBuilder/` 目录下创建以下文件：

- `ai_builder.db` - SQLite数据库文件
- `CN.txt` - 中文语言包
- `EN.txt` - 英文语言包（如果存在）

## 权限

- `arc_ai_builder.command.aibuilder` - 使用AI建筑师功能（默认：true）
- `arc_ai_builder.command.config` - 配置插件（默认：false）

## 故障排除

### 常见问题

1. **"AI建筑师未配置"**
   - 使用 `/aibuilderconfig` 命令配置OpenAI API密钥

2. **"经济系统未找到"**
   - 确保安装了arc_core或umoney插件

3. **"余额不足"**
   - 确保玩家有足够的金钱支付建筑成本

4. **建筑指令执行失败**
   - 检查玩家是否有足够的权限
   - 确保目标位置没有被保护

## 开发信息

- 作者：DEVILENMO
- 版本：0.0.1
- 依赖：requests >= 2.25.0
- 兼容性：EndStone 0.10+

## 许可证

详见 LICENSE 文件。
